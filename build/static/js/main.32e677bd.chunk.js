(this["webpackJsonprestaurant-finder-react"]=this["webpackJsonprestaurant-finder-react"]||[]).push([[0],{39:function(t,e,s){},40:function(t,e,s){},49:function(t,e,s){"use strict";s.r(e);var a=s(1),n=s(0),i=s.n(n),o=s(20),c=s.n(o),r=(s(39),s.p,s(40),s(10)),l=s(2),h=s(13),d=s(14),u=s(9),j=s(17),b=s(16),p=(s(41),s(8)),g=s.n(p),O=s(51),m=s(54),f=s(52),x=s(53),y=s(30),v=s(31),_=g.a.icon({iconUrl:y.a,shadowUrl:v.a});g.a.Marker.prototype.options.icon=_;var S=function(t){Object(j.a)(s,t);var e=Object(b.a)(s);function s(t){var a;return Object(h.a)(this,s),(a=e.call(this,t)).state={dataLoaded:!1,lat:null,lng:null},a}return Object(d.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{class:"map",children:Object(a.jsxs)(O.a,{center:[this.props.details.coordinates.latitude,this.props.details.coordinates.longitude],zoom:17,scrollWheelZoom:!1,style:{height:"100vh"},children:[Object(a.jsx)(m.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(a.jsx)(f.a,{position:[this.props.details.coordinates.latitude,this.props.details.coordinates.longitude],children:Object(a.jsx)(x.a,{children:this.props.details.name})})]})})}}]),s}(i.a.Component),w=s(22),k=s.n(w),I=function(t){Object(j.a)(s,t);var e=Object(b.a)(s);function s(t){var a;return Object(h.a)(this,s),(a=e.call(this,t)).state={rest_details:{},dataLoaded:!1,showImages:!1,showImagesButton:"Show Images"},a.showPhotos=a.showPhotos.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){console.log("Fetching restaurant details"),fetch("/restaurant/"+this.props.match.params.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:this.state.lat,lng:this.state.lng,type:"rest",meal_type:"lunch"})}).then((function(t){return t.json()})).then(function(t){this.setState({rest_details:t}),console.log(this.state.rest_details),document.title=this.state.rest_details.name+" Details",this.setState({dataLoaded:!0})}.bind(this))}},{key:"showPhotos",value:function(){this.state.showImages?this.state.showImages&&(this.setState({showImages:!1}),this.setState({showImagesButton:"Show Images"})):(this.setState({showImages:!0}),this.setState({showImagesButton:"Hide Images"}))}},{key:"render",value:function(){var t=this;return this.state.dataLoaded?Object(a.jsxs)("div",{children:[Object(a.jsx)(k.a,{}),Object(a.jsx)("h1",{children:this.state.rest_details.name}),Object(a.jsx)("hr",{}),Object(a.jsxs)("h3",{children:["Phone: ",this.state.rest_details.display_phone]}),Object(a.jsxs)("h3",{children:[this.state.rest_details.rating," / 5 based on ",this.state.rest_details.review_count," reviews"]}),Object(a.jsxs)("h3",{children:["Price: ",this.state.rest_details.price]}),Object(a.jsxs)("h3",{children:["Location: ",this.state.rest_details.location.display_address[0]," ",this.state.rest_details.location.display_address[1]]}),Object(a.jsxs)("h3",{children:["Hours: ",this.state.rest_details.hours[0].open[0].start," until ",this.state.rest_details.hours[0].open[0].end]}),Object(a.jsx)("button",{class:"button",onClick:function(){t.showPhotos()},children:this.state.showImagesButton}),function(e){if(t.state.showImages)return Object(a.jsxs)("div",{class:"images-container",children:[Object(a.jsx)("img",{src:e[0]}),Object(a.jsx)("img",{src:e[1]}),Object(a.jsx)("img",{src:e[2]})]})}(this.state.rest_details.photos),Object(a.jsx)(S,{details:this.state.rest_details})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Loading Restaurant Information..."}),Object(a.jsx)("div",{class:"loader"})]})}}]),s}(i.a.Component),T=function(t){Object(j.a)(s,t);var e=Object(b.a)(s);function s(t){var a;return Object(h.a)(this,s),(a=e.call(this,t)).componentDidMount=a.componentDidMount.bind(Object(u.a)(a)),a.fetchDataFromYelp=a.fetchDataFromYelp.bind(Object(u.a)(a)),a.state={rest_list:[],lat:"",lng:"",dataLoaded:!1,currentMealType:""},a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var t=this.state.lat,e=this.state.lng;navigator.geolocation?(console.log("navigator.geolocation is available"),navigator.geolocation.getCurrentPosition(function(s){console.log("current position acquired"),t!==s.coords.latitude&&e!==s.coords.longitude&&(this.setState({lat:s.coords.latitude}),this.setState({lng:s.coords.longitude}),console.log(s.coords.latitude+" "+s.coords.longitude),this.fetchDataFromYelp())}.bind(this))):alert("Unable to get geolocation!")}},{key:"fetchDataFromYelp",value:function(){fetch("/getData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:this.state.lat,lng:this.state.lng,type:"rest",meal_type:"lunch"})}).then((function(t){return t.json()})).then(function(t){this.setState({rest_list:t}),this.setState({dataLoaded:!0}),this.setState({currentMealType:"lunch"})}.bind(this))}},{key:"changeMealType",value:function(t){this.setState({dataLoaded:!1}),fetch("/getData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:this.state.lat,lng:this.state.lng,type:"rest",meal_type:t})}).then((function(t){return t.json()})).then(function(e){this.setState({rest_list:e}),this.setState({dataLoaded:!0}),this.setState({currentMealType:t})}.bind(this))}},{key:"render",value:function(){var t=this;return this.state.dataLoaded?Object(a.jsxs)("div",{class:"main",children:[Object(a.jsx)(k.a,{}),Object(a.jsxs)("div",{class:"page-header",children:[Object(a.jsx)("h1",{children:"Restaurant Finder"}),Object(a.jsx)("hr",{}),Object(a.jsx)("button",{class:"button",onClick:function(){t.changeMealType("breakfast")},children:"Breakfast"}),Object(a.jsx)("button",{class:"button",onClick:function(){t.changeMealType("lunch")},children:"Lunch"}),Object(a.jsx)("button",{class:"button",onClick:function(){t.changeMealType("dinner")},children:"Dinner"}),Object(a.jsxs)("h3",{children:["Currently displaying ",this.state.rest_list.length," restaurants that serve ",this.state.currentMealType]})]}),this.state.rest_list.map((function(t){return Object(a.jsxs)("div",{class:"restaurant-list",children:[Object(a.jsx)("h3",{children:t.name}),Object(a.jsxs)("h3",{children:[t.location.address1," ",t.location.city,",",t.location.state]}),Object(a.jsx)(r.a,{children:Object(a.jsx)(r.b,{target:"_blank",to:"/details/"+t.id,children:"View Details"})})]})}))]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Finding Nearby Restaurants..."}),Object(a.jsx)("div",{class:"loader"})]})}}]),s}(i.a.Component),C=function(){return Object(a.jsx)("main",{children:Object(a.jsx)(r.a,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",component:T}),Object(a.jsx)(l.a,{path:"/details/:id",component:I})]})})})};var M=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(r.a,{children:Object(a.jsx)(C,{})})})},D=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,55)).then((function(e){var s=e.getCLS,a=e.getFID,n=e.getFCP,i=e.getLCP,o=e.getTTFB;s(t),a(t),n(t),i(t),o(t)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(M,{})}),document.getElementById("root")),D()}},[[49,1,2]]]);
//# sourceMappingURL=main.32e677bd.chunk.js.map