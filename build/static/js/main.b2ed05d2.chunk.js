(this["webpackJsonprestaurant-finder-react"]=this["webpackJsonprestaurant-finder-react"]||[]).push([[0],{38:function(t,e,a){},39:function(t,e,a){},46:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a(0),i=a.n(s),c=a(11),o=a.n(c),r=(a(38),a.p,a(39),a(9)),l=a(2),d=a(12),h=a(13),u=a(16),j=a(15),p=(a(40),a(8)),b=a.n(p),O=a(48),g=a(51),f=a(49),x=a(50),y=a(29),m=a(30),v=b.a.icon({iconUrl:y.a,shadowUrl:m.a});b.a.Marker.prototype.options.icon=v;var _=function(t){Object(u.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).state={dataLoaded:!1,lat:null,lng:null},n}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{class:"map",children:Object(n.jsxs)(O.a,{center:[this.props.details.coordinates.latitude,this.props.details.coordinates.longitude],zoom:17,scrollWheelZoom:!1,style:{height:"100vh"},children:[Object(n.jsx)(g.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(n.jsx)(f.a,{position:[this.props.details.coordinates.latitude,this.props.details.coordinates.longitude],children:Object(n.jsx)(x.a,{children:this.props.details.name})})]})})}}]),a}(i.a.Component),k=function(t){Object(u.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).state={rest_details:{},dataLoaded:!1,lat:null,lng:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){console.log("Fetching restaurant details"),fetch("https://rest-finder-react.herokuapp.com/restaurant/"+this.props.match.params.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:this.state.lat,lng:this.state.lng,type:"rest",meal_type:"lunch"})}).then((function(t){return t.json()})).then(function(t){this.setState({rest_details:t}),console.log(this.state.rest_details),document.title=this.state.rest_details.name+" Details",this.setState({dataLoaded:!0})}.bind(this))}},{key:"render",value:function(){return this.state.dataLoaded?Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:this.state.rest_details.name}),Object(n.jsx)("hr",{}),Object(n.jsxs)("h3",{children:["Phone: ",this.state.rest_details.display_phone]}),Object(n.jsxs)("h3",{children:[this.state.rest_details.rating," / 5 based on ",this.state.rest_details.review_count," reviews"]}),Object(n.jsxs)("h3",{children:["Price: ",this.state.rest_details.price]}),Object(n.jsxs)("h3",{children:["Location: ",this.state.rest_details.location.display_address[0]," ",this.state.rest_details.location.display_address[1]]}),Object(n.jsx)(_,{details:this.state.rest_details})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Loading Restaurant Information..."}),Object(n.jsx)("div",{class:"loader"})]})}}]),a}(i.a.Component),S=a(20),T=function(t){Object(u.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).componentDidMount=n.componentDidMount.bind(Object(S.a)(n)),n.fetchDataFromYelp=n.fetchDataFromYelp.bind(Object(S.a)(n)),n.state={rest_list:[],lat:"",lng:"",dataLoaded:!1,currentMealType:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this.state.lat,e=this.state.lng;navigator.geolocation?(console.log("navigator.geolocation is available"),navigator.geolocation.getCurrentPosition(function(a){console.log("current position acquired"),t!==a.coords.latitude&&e!==a.coords.longitude&&(this.setState({lat:a.coords.latitude}),this.setState({lng:a.coords.longitude}),console.log(a.coords.latitude+" "+a.coords.longitude),this.fetchDataFromYelp())}.bind(this))):alert("Unable to get geolocation!")}},{key:"fetchDataFromYelp",value:function(){fetch("https://rest-finder-react.herokuapp.com/getData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:this.state.lat,lng:this.state.lng,type:"rest",meal_type:"lunch"})}).then((function(t){return t.json()})).then(function(t){this.setState({rest_list:t}),this.setState({dataLoaded:!0}),this.setState({currentMealType:"lunch"})}.bind(this))}},{key:"changeMealType",value:function(t){this.setState({dataLoaded:!1}),fetch("https://rest-finder-react.herokuapp.com/getData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:this.state.lat,lng:this.state.lng,type:"rest",meal_type:t})}).then((function(t){return t.json()})).then(function(e){this.setState({rest_list:e}),this.setState({dataLoaded:!0}),this.setState({currentMealType:t})}.bind(this))}},{key:"changeMealType2",value:function(t){console.log("meal"+t)}},{key:"render",value:function(){var t=this;return this.state.dataLoaded?Object(n.jsxs)("div",{class:"main",children:[Object(n.jsxs)("div",{class:"page-header",children:[Object(n.jsx)("h1",{children:"Restaurant Finder"}),Object(n.jsx)("hr",{}),Object(n.jsx)("button",{class:"button",onClick:function(){t.changeMealType("breakfast")},children:"Breakfast"}),Object(n.jsx)("button",{class:"button",onClick:function(){t.changeMealType("lunch")},children:"Lunch"}),Object(n.jsx)("button",{class:"button",onClick:function(){t.changeMealType("dinner")},children:"Dinner"}),Object(n.jsxs)("h3",{children:["Currently displaying ",this.state.rest_list.length," restaurants that serve ",this.state.currentMealType]})]}),this.state.rest_list.map((function(t){return Object(n.jsxs)("div",{class:"restaurant-list",children:[Object(n.jsx)("h3",{children:t.name}),Object(n.jsxs)("h3",{children:[t.location.address1," ",t.location.city,",",t.location.state]}),Object(n.jsx)(r.a,{children:Object(n.jsx)(r.b,{target:"_blank",to:"/details/"+t.id,children:"View Details"})})]})}))]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Finding Nearby Restaurants..."}),Object(n.jsx)("div",{class:"loader"})]})}}]),a}(i.a.Component),M=function(){return Object(n.jsx)("main",{children:Object(n.jsx)(r.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:T}),Object(n.jsx)(l.a,{path:"/details/:id",component:k})]})})})};var C=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(r.a,{children:Object(n.jsx)(M,{})})})},D=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),s(t),i(t),c(t)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(C,{})}),document.getElementById("root")),D()}},[[46,1,2]]]);
//# sourceMappingURL=main.b2ed05d2.chunk.js.map